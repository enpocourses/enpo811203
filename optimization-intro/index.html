<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/enpo811203/libs/katex/katex.min.css"> <link rel=stylesheet  href="/enpo811203/libs/highlight/github.min.css"> <link rel=stylesheet  href="/enpo811203/css/franklin.css"> <link rel=stylesheet  href="/enpo811203/css/poole_hyde.css"> <link rel=stylesheet  href="/enpo811203/css/custom.css"> <style> html { font-size: 17px; } .franklin-content { position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em; } @media (min-width: 940px) { .franklin-content { width: 100%; margin-left: auto; margin-right: auto; } } @media (max-width: 768px) { .franklin-content { padding-left: 6%; padding-right: 6%; } } </style> <link rel=icon  href="/enpo811203/assets/favicon.png"> <title>让我们来说说优化</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <img src="/enpo811203/assets/ai4energylogo.png" style="width: 200px; height: auto; display: inline"> <h1 style="font-size:1em; opacity: 0.95;"><a href="/enpo811203/">智慧能源系统导论</a></h1> </div> <br> <style> </style> <nav class=sidebar-nav  style="opacity: 0.9"> <a href="/enpo811203/"><small style="text-transform: uppercase; font-size: 1.75em">课程目录</small></a> <a class="sidebar-nav-item " href="/enpo811203/introductionindex/"><b>第〇篇</b> - <em>绪论篇</em></a> <a class="sidebar-nav-item " href="/enpo811203/cs4eindex/"><b>第一篇</b> - <em>计算入门导引</em></a> <a class="sidebar-nav-item " href="/enpo811203/optimizationindex/"><b>第二篇</b> - <em>从优化说起</em></a> <a class="sidebar-nav-item " href="/enpo811203/simulationindex/"><b>第三篇</b> - <em>系统仿真</em></a> <a class="sidebar-nav-item " href="/enpo811203/structureindex/"><b>第四篇</b> - <em>组件化建模</em></a> <a class="sidebar-nav-item " href="/enpo811203/controlindex/"><b>第五篇</b> - <em>先进过程控制</em></a> <a class="sidebar-nav-item " href="/enpo811203/practiseindex/"><b>第六篇</b> - <em>全线实践练习</em></a> <a class="sidebar-nav-item " href="/enpo811203/frontindex/"><b>第七篇</b> - <em>前沿专题</em></a> <a class="sidebar-nav-item " href="/enpo811203/referenceindex/"><b>第八篇</b> - <em>分类参考材料</em></a> <a class="sidebar-nav-item " href="/enpo811203/sumarry/"><b>小结篇</b> - <em>不是最后的最后</em></a> <br> <h1 style="font-size:1em; opacity: 0.95;"><a href="https://ai4energy.github.io/">返回Ai4Energy主页</a></h1> </nav> </div> </div> <div class="content container"> <div class=franklin-content ><h1 id="让我们来说说优化"><a href="#让我们来说说优化" class=header-anchor >让我们来说说优化</a></h1> <h2 id="优化是什么"><a href="#优化是什么" class=header-anchor >优化是什么</a></h2> <h2 id="跑一个任务呗"><a href="#跑一个任务呗" class=header-anchor >跑一个任务呗</a></h2> <p>打开julia，按&#93;进入包管理模式，输入如下的命令安装JuMP.jl,</p> <pre><code class="julia hljs">add JuMP</code></pre>
<p>我们来考虑如下一个优化问题，</p>
<span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mtable rowspacing=0.25em  columnalign="right left right" columnspacing="0em 1em"><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mrow></mrow><mi>min</mi><mo>⁡</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mn>12</mn><mi>x</mi><mo>+</mo><mn>20</mn><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mrow></mrow><mtext>  </mtext><mtext>  </mtext><mtext>s.t.</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mn>6</mn><mi>x</mi><mo>+</mo><mn>8</mn><mi>y</mi><mo>≥</mo><mn>100</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mn>7</mn><mi>x</mi><mo>+</mo><mn>12</mn><mi>y</mi><mo>≥</mo><mn>120</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mi>x</mi><mo>≥</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mi>y</mi><mo>∈</mo><mo stretchy=false >[</mo><mn>0</mn><mo separator=true >,</mo><mn>3</mn><mo stretchy=false >]</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">
 \begin{aligned}
 &amp; \min &amp; 12x + 20y \\
 &amp; \;\;\text{s.t.} &amp; 6x + 8y \geq 100 \\
 &amp; &amp; 7x + 12y \geq 120 \\
 &amp; &amp; x \geq 0 \\
 &amp; &amp; y \in [0, 3] \\
 \end{aligned}
</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:7.5em;vertical-align:-3.5em;"></span><span class=mord ><span class=mtable ><span class=col-align-r ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:4em;"><span style="top:-6em;"><span class=pstrut  style="height:2.84em;"></span><span class=mord ></span></span><span style="top:-4.5em;"><span class=pstrut  style="height:2.84em;"></span><span class=mord ></span></span><span style="top:-3em;"><span class=pstrut  style="height:2.84em;"></span><span class=mord ></span></span><span style="top:-1.5em;"><span class=pstrut  style="height:2.84em;"></span><span class=mord ></span></span><span style="top:0em;"><span class=pstrut  style="height:2.84em;"></span><span class=mord ></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:3.5em;"><span></span></span></span></span></span><span class=col-align-l ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:4em;"><span style="top:-6.16em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span><span class=mspace  style="margin-right:0.1667em;"></span><span class=mop >min</span></span></span><span style="top:-4.66em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mspace  style="margin-right:0.2778em;"></span><span class="mord text"><span class=mord >s.t.</span></span></span></span><span style="top:-3.16em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span></span></span><span style="top:-1.66em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span></span></span><span style="top:-0.16em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:3.5em;"><span></span></span></span></span></span><span class=arraycolsep  style="width:1em;"></span><span class=col-align-r ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:4em;"><span style="top:-6.16em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >12</span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mord >20</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-4.66em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >6</span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mord >8</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >≥</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mord >100</span></span></span><span style="top:-3.16em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >7</span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mord >12</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >≥</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mord >120</span></span></span><span style="top:-1.66em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >≥</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mord >0</span></span></span><span style="top:-0.16em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >∈</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mopen >[</span><span class=mord >0</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.1667em;"></span><span class=mord >3</span><span class=mclose >]</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:3.5em;"><span></span></span></span></span></span></span></span></span></span></span></span>
<p>我在julia的REPL下输入如下的代码，</p>
<pre><code class="julia hljs"><span class=hljs-keyword >using</span> JuMP
<span class=hljs-keyword >using</span> HiGHS
model = Model(HiGHS.Optimizer)
<span class=hljs-meta >@variable</span>(model, x &gt;= <span class=hljs-number >0</span>)
<span class=hljs-meta >@variable</span>(model, <span class=hljs-number >0</span> &lt;= y &lt;= <span class=hljs-number >3</span>)
<span class=hljs-meta >@objective</span>(model, Min, <span class=hljs-number >12</span>x + <span class=hljs-number >20</span>y)
<span class=hljs-meta >@constraint</span>(model, c1, <span class=hljs-number >6</span>x + <span class=hljs-number >8</span>y &gt;= <span class=hljs-number >100</span>)
<span class=hljs-meta >@constraint</span>(model, c2, <span class=hljs-number >7</span>x + <span class=hljs-number >12</span>y &gt;= <span class=hljs-number >120</span>)
print(model)
optimize!(model)
<span class=hljs-meta >@show</span> termination_status(model)
<span class=hljs-meta >@show</span> primal_status(model)
<span class=hljs-meta >@show</span> dual_status(model)
<span class=hljs-meta >@show</span> objective_value(model)
<span class=hljs-meta >@show</span> value(x)
<span class=hljs-meta >@show</span> value(y)
<span class=hljs-meta >@show</span> shadow_price(c1)
<span class=hljs-meta >@show</span> shadow_price(c2)
<span class=hljs-literal >nothing</span> <span class=hljs-comment >#hide</span></code></pre>
<p>简单的来讲呢，建个模型，告诉这个模型你的变量、目标函数、约束，然后调用合适的求解器求解。用JuMP.jl来处理优化就是这么简单。</p>
<h2 id="优化问题分类"><a href="#优化问题分类" class=header-anchor >优化问题分类</a></h2>
<p>lp，nlp，milp，minlp，</p>
<h2 id="优化求解器"><a href="#优化求解器" class=header-anchor >优化求解器</a></h2>
<h3 id="传统决定性求解器"><a href="#传统决定性求解器" class=header-anchor >传统决定性求解器</a></h3>
<h3 id="启发式求解器"><a href="#启发式求解器" class=header-anchor >启发式求解器</a></h3>
<h3 id="基于仿真的优化"><a href="#基于仿真的优化" class=header-anchor >基于仿真的优化</a></h3>
<h3 id="数据驱动优化"><a href="#数据驱动优化" class=header-anchor >数据驱动优化</a></h3>
<h2 id="优化建模语言平台"><a href="#优化建模语言平台" class=header-anchor >优化建模语言（平台）</a></h2>
<p>gams，apml， aimms，pyomo，jump</p>
<h2 id="优化怎么学"><a href="#优化怎么学" class=header-anchor >优化怎么学</a></h2>
<p>以下来自<a href="https://www.zhihu.com/question/22686770/answer/41243665">知乎的一个回答</a>，</p>
<blockquote>
<p>欢迎转载和分享给更多人，无需标明作者和链接，但如果标了会更显得尊重别人的成果，谢谢</p>
</blockquote>
<blockquote>
<p>首先，请你不要一上来就对着书按着顺序学。运筹学是一个子方向很多的学科，线性规划，整数规划，非线性规划，随机过程，随机规划，存储量，博弈论，鲁棒优化，最优控制。。。每一个方向里面全是数学，有浅一点的，有很深的，一大堆符号，要都学，学很久，而且也会学得很痛苦，因为他们之间虽然有关系，但是关系不密切。刚开始，我觉得有必要知道这门学科的灵魂。</p>
</blockquote>
<blockquote>
<p>学运筹不要一上来就去钻，例如一上来就学最最基本的线性规划，是因为如果这么学，其实你学的是优化部分的应用数学，不是运筹学。运筹学不仅仅包括优化。优化只是理论部分。例如线性规划是一种刻画某些现实问题的模型，如果只关注于线性规划本身，那其实有很大一部分是在关注线性规划的数学理论。解线性规划里面的数学理论就多了去了：线性不等式的代表性，对偶理论，各种单纯性法，椭圆法和各种内点法，现在还在发展。里面每一个理论都不是随便看看就能通的，特别对于数学基础不算很好的同学而言。有些教授对里面的数学还讲一些high level的想法，但是国内教科书一般就直接上定义XXX，定理XXX，两下就可以晕了。。。运筹学现在很受关注，很多社科和工科学生都在接触，花太多时间在数学理论部分上，对他们而言挺可惜的。</p>
</blockquote>
<blockquote>
<p>关键是，对大多数人，里面的数学压根不需要学，我们有软件解！有不少还是开源的！这个自己搜搜就好，其它回答也提到一些了。现在运筹学领域的专家们都给我们把各种解法自动化了，何必不好好利用，还自己慢慢理解算法？再慢慢编程？所以如果只是入门，最重要是看看这一大堆运筹学里面不同的理论都是干什么的，哪些模型好解，哪些难解，现在很多我们接触到的模型都有定论的。</p>
</blockquote>
<blockquote>
<p>运筹学里面其实更重要的是建模。换言之，就是看现实问题和数学语言是怎么对应的。这个因为考试的原因，太容易被忽略了其重要性。建模这事情说难不难说易不易。易在好像就是定义几个变量，定义一下变量之间的关系和目标函数。难在<strong>１.　对现实问题要看透：什么才是问题里面的最重要的因素，抓住重点 ２.　找到最合适的数学语言和它对应， ３.　模型要尽量容易解。</strong></p>
</blockquote>
<blockquote>
<p>第一点是因问题而异的，没法聊。第二点是可以通过了解各种模型适用于刻画具有什么结构的问题来达到。运筹学里面有很多模型。举几个例子：</p>
</blockquote>
<blockquote>
<p>１.　线性规划能表示所有有线性结构的问题，例如做采购，我们知道了每家供应商的固定价格和最大供应量，我们希望最小化成本，那总成本＝单价×数量，这个就是这个问题里面的线性关系。 ２.　整数规划能处理一些线性规划处理不了的问题。例如还是采购，假如选了某家供应商，每选定一个供应商，还要增加一个固定成本，于是我们就要多设一个变量来代表是不是选了这个供应商，这时候就需要整数限制。不然那个变量解出来等于０.５，我们只选半个它？ ３.　当现实问题涉及多个参与者，每个参与者都有自己优化的东西，这时候就涉及互动，就可以将博弈论派上用场了。 ４.　如果见到一个系统是随时间变化的，就可以考虑用最优控制。等等等等。</p>
</blockquote>
<blockquote>
<p>懂了对自己身边的具体问题建模，再拿个软件解一下模型，对大部分人就够了。所以要看书或者看视频自学的话，第一步是，每一章只看前面讲建模（modeling或者formulation）那一节。够用了。但是对于要更深入地去懂运筹学还不够。做得好的运筹学问题都是这样的： </p>
</blockquote>
<blockquote>
<p><strong>１.　深刻认识现实问题 ２.　用数学语言描述问题（建模） ３.　用数学工具研究模型 ４.　再把研究出来的成果从数学语言翻译成我们能看懂的语言（例如汉语，英语。。。）</strong></p>
</blockquote>
<blockquote>
<p>前面我们只聊到１,２和一点点３，真正的美出现在４。４的重要意义在于如果我们把一个问题解出来了，但是看不懂解出来的是什么，那么我们对这个问题其实是没有增加多少认识的。有些时候还会导致其他问题，例如你在解决某个现实问题的时候，你把一个计算机解出来给你的解拿来用了，发现现实情况不像你想象中那样，那怎么办？是计算机算解错了吗？还是你的模型没建好吗？如果有人给你投资做一个某些方面的优化系统，人家能信得过这样靠建个模型解个解得出的方案吗？大多数不懂你在做什么的人是不会信的。所以好的解可以提供<strong>insight！（能让人读懂的现实含义）</strong></p>
</blockquote>
<blockquote>
<p>例如Kelly Gambling，假如已知有n匹马，他们胜率分别是b<em>i,跑第一的话投1块钱能赢o</em>i块钱，你总共有100块钱（你可以当成一百万，具体数目不重要，关键是比例），投到第i匹马的钱是100p<em>i。假如你要买马买无数次，那应该怎么分配你的钱到各匹马上去？这个问题的解就是p</em>i和b_i成比例。给我们的insight就是，获胜几率大的多放点钱，几率小的少放点钱，就是这么简单。这个model的解给了我们分散投资的idea。</p>
</blockquote>
<blockquote>
<p>这是最简单的情况，马和马之间是indepedent的，如果是投资股票，股票之间可能有相关性，如果这个相关性很重要，建模的时候就把它也考虑进去，得到考虑了相关性的解，再试图去interpret你的解。如果相关性不太重要，就没必要把模型搞复杂。</p>
</blockquote>
<blockquote>
<p>能得到给我们insight的解难吗？当然难！要想４出现，前面的１，２,３一定要简洁而深刻。模型既能抓住问题的重点，还要足够简单，不然最后出来的结果怎么可能让人看得懂。这里头需要的可不仅是扎实的数学基础，数学只是描述问题的一种语言，更重要的还是对具体问题的认识和对建出来的模型的预判。对于一个现实问题，建立一个简单好解又能较好地描述现实情况的模型，是一种艺术。这是数学界甚至科学界追求的美的原则：<strong>simple and elegant</strong>。</p>
</blockquote>
<p>以上内容的作者还说建立了微信公众号“运筹之学”，做一些运筹的科普。大家可以移步参考。</p>
<p>对运用优化方法解决我们领域的问题，不要一上来就学那些底层的数学理论，求解算法。我们需要的是理解问题的特性，求解器的特性，适配之。逐渐逐渐的，形成自己的认识和经验。当然建模的平台（语言）也需要考虑一下，便于我们表达模型和问题。</p>
<h2 id="能源相关优化案例到哪找"><a href="#能源相关优化案例到哪找" class=header-anchor >能源相关优化案例到哪找</a></h2>
<h2 id="好多好多的资源哦"><a href="#好多好多的资源哦" class=header-anchor >好多好多的资源哦</a></h2>
<p>neos， apmonitor， pyomo，jump，</p>
<p><strong>JuMP.jl</strong></p>
<p><strong>NEOS</strong> 如果你想尝试不同的求解器，包括一些商业的求解器，你可以使用<a href="https://neos-server.org/neos/">NEOS-Server</a>。他们提供了不同格式输入，并且还提供api调用。就是要求不能滥用。</p>
<p><strong>APMonitor和Gekko</strong></p>
<p><strong>GalacticOptim.jl</strong></p>
<p><strong>pyomo</strong></p>
<p><strong>OpenMDAO</strong></p>
<h1 id="分级组件化建模"><a href="#分级组件化建模" class=header-anchor >分级组件化建模</a></h1>
<p>plasmo.jl这样的主要是建立了一种分级组件建模方式。</p>
<h1 id="还有一些想说的"><a href="#还有一些想说的" class=header-anchor >还有一些想说的</a></h1>
<p>calypso之类的优化，强烈耦合在一块的，不是评价-优化模式。</p>
<div class=page-foot >
    <div class=copyright >
      &copy; Mingtao Li。最后更新：July 13, 2023。本站使用<a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>和<a href="https://julialang.org">Julia编程语言</a>构建。
    </div>
</div>
  </div>
      </div> 
  </div> 
  <script src="/enpo811203/libs/pure/ui.min.js"></script>